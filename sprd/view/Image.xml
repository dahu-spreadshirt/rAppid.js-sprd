<ui:View xmlns="http://www.w3.org/1999/xhtml"
         xmlns:ui="js.ui" xmlns:js="js.core"
         src="{imageUrl()}" alt="{alt()}" onload="onLoad" tagName="img">

    <js:Imports>
        underscore;
        sprd.data.ImageService
    </js:Imports>

    <js:Script>

        <![CDATA[
        (function (_, ImageService) {
            return {
                defaults: {
                    loaded: false
                },

                onLoad: function () {
                    this.set('loaded', true);
                },

                extendUrlWithSizes: function (url) {
                    if (this.$.width) {
                        url += ",width=" + ImageService.normalizeImageSize(this.$.width);
                    }

                    if (this.$.height) {
                        url += ",height=" + ImageService.normalizeImageSize(this.$.height);
                    }

                    return url;
                },
                imageUrl: function () {
                    return "";
                },
                _renderLoaded: function (loaded) {
                    if (loaded) {
                        this.removeClass('loading');
                    } else {
                        this.addClass('loading');
                    }
                },
                _renderSrc: function(src){
                    this.set('loaded',false);
                    this._setAttribute('src',src);
                },
                alt: function () {
                    return "";
                }
            }
        })
        ]]>

    </js:Script>
</ui:View>